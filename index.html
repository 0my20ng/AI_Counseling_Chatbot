<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI 상담 챗봇 - 전문 심리 상담 시스템</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- 메인 컨테이너 -->
    <div class="container">
        <!-- 설정 패널 -->
        <div class="settings-panel" id="settingsPanel">
            <div class="api-config">
                <label for="aiProvider" class="hidden">AI 공급자 선택:</label>
                <select id="aiProvider">
                    <option value="openai">OpenAI GPT</option>
                    <option value="google">Google Gemini</option>
                    <option value="local">로컬 모델 (무료)</option>
                </select>
                <input type="password" id="apiKey" placeholder="API 키 입력 (선택사항)">
                <button class="save-config-btn" onclick="chatbot.saveApiConfig()">저장</button>
            </div>
            <div class="api-status" id="apiStatus">
                설정을 저장하여 AI 연결을 테스트하세요.
            </div>
        </div>

        <!-- 헤더 영역 -->
        <div class="header">
            <div class="header-content">
                <div>
                    <button class="settings-toggle" onclick="chatbot.toggleSettings()">⚙️ AI 설정</button>
                    <h1>🧠 AI 전문 상담 챗봇</h1>
                    <p>익명 보장 • 자연스러운 대화 • 개인정보 보호</p>
                </div>
                <!-- 세션 정보 -->
                <div class="session-info">
                    <div class="status-indicator">
                        <div class="status-dot"></div>
                        <span>안전한 연결</span>
                    </div>
                    <div class="session-id" id="sessionId">세션: 로딩중...</div>
                </div>
            </div>
        </div>

        <!-- 채팅 영역 -->
        <div class="chat-container" id="chatContainer">
            <!-- 개인정보 보호 공지 -->
            <div class="privacy-notice">
                🔒 <strong>개인정보 보호</strong>: 모든 대화는 익명화되어 임시 저장되며, 상담 종료 시 자동 삭제됩니다.
            </div>
            
            <!-- 환영 화면 -->
            <div class="welcome-screen" id="welcomeScreen">
                <div class="welcome-icon">🤝</div>
                <h2>자연스러운 AI 상담사에 오신 것을 환영합니다</h2>
                <p>GPT, Gemini 등 최신 AI 모델을 활용한<br>
                공감적이고 자연스러운 상담을 제공합니다.</p>
                
                <!-- 상담 모드 선택 -->
                <div class="mode-selection mt-20">
                    <div class="mode-card" onclick="chatbot.selectMode('conversation')">
                        <h3>💬 자유 대화 상담</h3>
                        <p>자연스러운 대화를 통한<br>감정 분석 및 상담</p>
                    </div>
                    <div class="mode-card" onclick="chatbot.selectMode('assessment')">
                        <h3>📋 표준 심리검사</h3>
                        <p>PHQ-9, GAD-7, PSS<br>표준화된 평가</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- 입력 영역 -->
        <div class="input-container">
            <textarea 
                class="input-field" 
                id="messageInput" 
                placeholder="편안하게 현재 상황이나 고민을 말씀해 주세요..."
                maxlength="1000"
                rows="1"
            ></textarea>
            <button class="send-button" id="sendButton">➤</button>
        </div>
    </div>

    <!-- JavaScript 파일들 (순서 중요!) -->
    <script src="js/config.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/response.js"></script>
    <script src="js/prompts.js"></script>
    <script src="js/ai-provider.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/assessment.js"></script>
    <script src="js/chatbot.js"></script>
    <script>
        // 전역 변수 및 초기화
        let chatbot;
        document.addEventListener('DOMContentLoaded', () => {
            chatbot = new EnhancedAICounselingChatbot();
        });
    </script>
</body>
</html>